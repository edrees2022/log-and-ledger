# نظام الموازنات التقديرية (Budgeting System)

## نظرة عامة
نظام لإعداد الموازنات التقديرية ومقارنتها بالأداء الفعلي (Budget vs Actual).

## الميزات المنفذة

### 1. إعداد الموازنة (Budget Setup)
- إعداد موازنة لكل حساب مصروفات/إيرادات.
- تحديد المبالغ المتوقعة لكل شهر (يناير - ديسمبر).
- دعم سنوات مالية متعددة.

### 2. تقارير الأداء (Performance Reports)
- **تقرير الموازنة مقابل الفعلي (Budget vs Actual)**:
  - مقارنة المبلغ المخطط بالمصروف الفعلي.
  - حساب الانحراف (Variance) كقيمة ونسبة مئوية.
  - تجميع البيانات شهرياً أو سنوياً.

### 3. الهيكلية البرمجية

#### جداول قاعدة البيانات
- `budgets`: تخزين الموازنات الشهرية لكل حساب.

#### الملفات
- `server/utils/budget.ts`: منطق استخراج التقرير ومقارنة الأرصدة.
- `server/routes/budgets.ts`: واجهة برمجة التطبيقات (API).

### 4. API Endpoints

- **GET /api/budgets**: عرض الموازنات الحالية.
- **POST /api/budgets**: إنشاء أو تحديث موازنة لحساب معين.
- **GET /api/budgets/vs-actual**: تقرير المقارنة (يتطلب `fiscalYear`).

## الخطوات التالية
- إضافة تنبيهات عند تجاوز الموازنة (Budget Alerts).
- دعم الموازنات للمشاريع (Project Budgeting).

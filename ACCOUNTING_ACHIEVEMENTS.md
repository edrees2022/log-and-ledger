# ุงูุฅูุฌุงุฒุงุช ุงููุญุงุณุจูุฉ - Log & Ledger

## ๐ ูุธุฑุฉ ุนุงูุฉ
ุชู ุชุทููุฑ ูุธุงู ูุญุงุณุจู ูุชูุงูู ูุดูู ุฌููุน ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ ูุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช ูุงููุนุงููุงุช ุงููุงููุฉ.

---

## โ ุงูุฃูุธูุฉ ุงููููุฐุฉ

### 1. ูุธุงู ุชุฎุตูุต ุงููุฏููุนุงุช ูุงูุฅูุตุงูุงุช (Payment/Receipt Allocation)
**ุงูุญุงูุฉ**: โ ููุชูู

**ุงูููุฒุงุช**:
- ุฑุจุท ุงููุฏููุนุงุช ุจุงูููุงุชูุฑ ุงูุดุฑุงุฆูุฉ (Bills)
- ุฑุจุท ุงูุฅูุตุงูุงุช ุจููุงุชูุฑ ุงููุจูุนุงุช (Invoices)
- ุชุชุจุน ุงููุจูุบ ุงููุฎุตุต ูุงููุจูุบ ุงููุชุจูู
- ุชุญุฏูุซ ุญุงูุฉ ุงูููุงุชูุฑ ุชููุงุฆูุงู (paid/partially_paid/unpaid)
- ุณุฌู ุชุฎุตูุต ูุงูู ููู ูุนุงููุฉ

**ุงููููุงุช**:
- `server/utils/paymentAllocation.ts`
- `server/routes/banking.ts` (+ allocation endpoints)

**API Endpoints**:
- `POST /api/banking/receipts/:id/allocate`
- `POST /api/banking/payments/:id/allocate`
- `GET /api/banking/receipts/:id/allocations`
- `GET /api/banking/payments/:id/allocations`

---

### 2. ูุธุงู ุงูุชุฑููู ุงูุชููุงุฆู ูููุณุชูุฏุงุช (Document Sequences)
**ุงูุญุงูุฉ**: โ ููุชูู

**ุงูููุฒุงุช**:
- ุชูููุฏ ุฃุฑูุงู ูุณุชูุฏุงุช ุชููุงุฆูุฉ ุจุตูุบุฉ: `PREFIX-YEAR-NUMBER`
- ูุซุงู: `INV-2025-00001`, `BILL-2025-00123`
- ูุฏุนู ุฌููุน ุฃููุงุน ุงููุณุชูุฏุงุช:
  - ููุงุชูุฑ ุงููุจูุนุงุช (INV)
  - ููุงุชูุฑ ุงูุดุฑุงุก (BILL)
  - ุนุฑูุถ ุงูุฃุณุนุงุฑ (QUOT)
  - ุฃูุงูุฑ ุงูุดุฑุงุก (PO)
  - ุงูุฅูุตุงูุงุช (RCPT)
  - ุงููุฏููุนุงุช (PAY)
  - ุฅุดุนุงุฑุงุช ุฏุงุฆูุฉ/ูุฏููุฉ (CN/DN)
  - ุงููููุฏ ุงูููููุฉ (JE)
- ูุชุงุจุนุฉ ุงูุณูุฉ ุงููุงููุฉ (Fiscal Year)
- ุฅุนุงุฏุฉ ุงูุชุณูุณู ุชููุงุฆูุงู ูู ุณูุฉ ูุงููุฉ

**ุงููููุงุช**:
- `server/utils/documentSequence.ts`

**ูุธุงุฆู**:
```typescript
getNextDocumentNumber(companyId, documentType)
getCurrentFiscalYear(companyId, date)
```

---

### 3. ูุธุงู ุงููููุฏ ุงูููููุฉ (Journal Entry System)
**ุงูุญุงูุฉ**: โ ููุชูู

**ุงูููุฒุงุช**:
- **ูููุฏ ุชููุงุฆูุฉ** ุนูุฏ ุฅูุดุงุก:
  - ููุงุชูุฑ ุงููุจูุนุงุช (DR: Accounts Receivable, CR: Sales + Tax)
  - ููุงุชูุฑ ุงูุดุฑุงุก (DR: Expense + Tax, CR: Accounts Payable)
  - ุงูุฅูุตุงูุงุช (DR: Cash, CR: Accounts Receivable)
  - ุงููุฏููุนุงุช (DR: Accounts Payable, CR: Cash)
- **ูููุฏ ูุฏููุฉ** ูู ุงููุญุงุณุจ
- **ุนูุณ ุงููููุฏ** (Reversing Entries)
- **ุงูุชุญูู ูู ุงูุชูุงุฒู** (Debits = Credits)
- ุชุฑููู ุชููุงุฆู ูููููุฏ
- ุฑุจุท ุงููููุฏ ุจุงููุณุชูุฏุงุช ุงูุฃุตููุฉ

**ุงููููุงุช**:
- `server/utils/journalEntry.ts` (420+ ุณุทุฑ)
- `server/routes/journals.ts` (300+ ุณุทุฑ)
- ุชูุงูู ูุน: `sales.ts`, `purchases.ts`, `banking.ts`

**API Endpoints**:
- `GET /api/journals` - ุนุฑุถ ุฌููุน ุงููููุฏ
- `GET /api/journals/:id` - ููุฏ ูุญุฏุฏ ูุน ุงูุณุทูุฑ
- `GET /api/journals/by-reference/:refType/:refId` - ูููุฏ ุญุณุจ ุงููุณุชูุฏ
- `POST /api/journals` - ุฅูุดุงุก ููุฏ ูุฏูู
- `POST /api/journals/:id/reverse` - ุนูุณ ููุฏ
- `DELETE /api/journals/:id` - ุญุฐู ููุฏ ูุฏูู

**ุฃููุงุน ุงููููุฏ**:
- `invoice` - ูู ูุงุชูุฑุฉ ูุจูุนุงุช
- `bill` - ูู ูุงุชูุฑุฉ ุดุฑุงุก
- `receipt` - ูู ุฅูุตุงู
- `payment` - ูู ูุฏููุนุงุช
- `manual` - ููุฏ ูุฏูู
- `reversal` - ููุฏ ุนูุณู

---

### 4. ูุธุงู ุงููุทุงุจูุฉ ุงูุจูููุฉ (Bank Reconciliation)
**ุงูุญุงูุฉ**: โ ููุชูู

**ุงูููุฒุงุช**:
- ูุทุงุจูุฉ ูุดู ุงูุญุณุงุจ ุงูุจููู ูุน ุณุฌูุงุช ุงููุธุงู
- ุงุณุชูุฑุงุฏ ูุดูู ุงูุญุณุงุจุงุช (CSV/Excel)
- ูุทุงุจูุฉ ุชููุงุฆูุฉ ูููุนุงููุงุช ุงููุชุทุงุจูุฉ (ุงููุจูุบ ูุงูุชุงุฑูุฎ)
- ูุทุงุจูุฉ ูุฏููุฉ ูููุนุงููุงุช ุงููุนูุฏุฉ
- ุชูุฑูุฑ ุชุณููุฉ ุจูููุฉ ููุถุญ ุงููุฑููุงุช
- ุชุชุจุน ุญุงูุฉ ูู ูุนุงููุฉ (reconciled/unreconciled)

**ุงููููุงุช**:
- `server/utils/bankReconciliation.ts`
- `server/routes/reconciliation.ts`

---

### 5. ูุธุงู ุงูุนููุงุช ุงููุชุนุฏุฏุฉ (Multi-Currency System)
**ุงูุญุงูุฉ**: โ ููุชูู (Backend)

**ุงูููุฒุงุช**:
- ุฏุนู ุบูุฑ ูุญุฏูุฏ ููุนููุงุช
- ุฌุฏูู ุฃุณุนุงุฑ ุตุฑู ุชุงุฑูุฎู
- ุฌูุจ ุชููุงุฆู ูุฃุณุนุงุฑ ุงูุตุฑู ุนูุฏ ุฅูุดุงุก ุงูููุงุชูุฑ
- ุฏุนู ุงูุฃุณุนุงุฑ ุงูุนูุณูุฉ (Inverse Rates)
- ุฅุฏุฑุงุฌ ุชููุงุฆู ููุนููุงุช ุงูุนุงูููุฉ ุงูุฑุฆูุณูุฉ
- ุชุญููู ุงูุนููุงุช ูู ุงูููุช ุงููุนูู

**ุงููููุงุช**:
- `server/utils/currency.ts`
- `server/routes/currencies.ts`
- ุชูุงูู ูุน: `sales.ts`, `purchases.ts`

**API Endpoints**:
- `GET /api/currencies` - ูุงุฆูุฉ ุงูุนููุงุช
- `GET /api/currencies/rates` - ุณุฌู ุฃุณุนุงุฑ ุงูุตุฑู
- `POST /api/currencies/rates` - ุฅุถุงูุฉ ุณุนุฑ ุตุฑู
- `POST /api/currencies/convert` - ุญุงุณุจุฉ ุชุญููู

---

## ๐ ุงููุณุชูุฏุงุช ุงูุชุฌุงุฑูุฉ ุงููุฏุนููุฉ

### ุงููุจูุนุงุช:
- โ ุนุฑูุถ ุงูุฃุณุนุงุฑ (Sales Quotations) + ุชุญููู ููุงุชูุฑุฉ
- โ ููุงุชูุฑ ุงููุจูุนุงุช (Sales Invoices)
- โ ุฅุดุนุงุฑุงุช ุฏุงุฆูุฉ (Credit Notes) + ุฑุจุท ุจุงููุงุชูุฑุฉ

### ุงููุดุชุฑูุงุช:
- โ ุฃูุงูุฑ ุงูุดุฑุงุก (Purchase Orders) + ุชุญููู ููุงุชูุฑุฉ
- โ ููุงุชูุฑ ุงูุดุฑุงุก (Bills)
- โ ุฅุดุนุงุฑุงุช ูุฏููุฉ (Debit Notes) + ุฑุจุท ุจุงููุงุชูุฑุฉ

### ุงูุจููู:
- โ ุงูุฅูุตุงูุงุช (Receipts) + ุชุฎุตูุต ููููุงุชูุฑ
- โ ุงููุฏููุนุงุช (Payments) + ุชุฎุตูุต ููููุงุชูุฑ ุงูุดุฑุงุฆูุฉ
- โ ุงูุญุณุงุจุงุช ุงูุจูููุฉ (Bank Accounts)
- โ ุงููุทุงุจูุฉ ุงูุจูููุฉ (Bank Reconciliation)

### ุงููุญุงุณุจุฉ:
- โ ุงููููุฏ ุงูููููุฉ (Journal Entries)
- โ ุฏููู ุงูุญุณุงุจุงุช (Chart of Accounts)
- โ ูุฑุงูุฒ ุงูุชูููุฉ (Cost Centers)

---

## ๐ง ุงูุจููุฉ ุงูุชุญุชูุฉ

### ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **PostgreSQL** ูุน Drizzle ORM
- **ุฌุฏุงูู ุฌุฏูุฏุฉ**:
  - `payment_allocations`
  - `document_sequences`
  - `journals`
  - `journal_lines`
  - `bank_reconciliations`
  - `bank_reconciliation_items`

### ุงูุฃูุงู
- ูุธุงู ุตูุงุญูุงุช ูุชูุฏู
- ุชุฏููู ูุงูู (Audit Trail)
- ุชุณุฌูู ุงูุนูููุงุช (Logging)
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ

### ุงูุฃุฏุงุก
- Redis caching ููุจูุงูุงุช ุงููุชูุฑุฑุฉ
- Rate limiting
- Query optimization
- Batch operations

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

### ุงูููุฏ ุงููููุดุฃ:
- **4 ุฃูุธูุฉ ุฑุฆูุณูุฉ** ููุชููุฉ
- **~1,500 ุณุทุฑ** ูู ุงูุฃููุงุฏ ุงูุฌุฏูุฏุฉ
- **8 ูููุงุช ุฌุฏูุฏุฉ**
- **6 ุฌุฏุงูู ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ**
- **25+ API endpoint** ุฌุฏูุฏุฉ
- **3 ูููุงุช ุชูุซูู** ุดุงููุฉ

### ุงููุธุงุฆู:
```
server/utils/
  - paymentAllocation.ts       (350+ ุณุทุฑ)
  - documentSequence.ts         (180+ ุณุทุฑ)
  - journalEntry.ts             (420+ ุณุทุฑ)
  - bankReconciliation.ts       (370+ ุณุทุฑ)

server/routes/
  - journals.ts                 (300+ ุณุทุฑ)
  - bankReconciliation.ts       (230+ ุณุทุฑ)
```

---

## โ ุฌูุฏุฉ ุงูููุฏ

- โ **TypeScript** type-safe 100%
- โ ุฌููุน ุงูุฃููุงุฏ ุงุฌุชุงุฒุช `tsc` ุจูุฌุงุญ
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ
- โ ุชูุซูู ูุงูู (JSDoc)
- โ ุฃูุงู ูุชูุฏู (Permissions & Auth)
- โ ุงุฎุชุจุงุฑ ูุฏูู ูููุธุงุฆู ุงูุฃุณุงุณูุฉ

---

## ๐ฏ ุงูููุฒุงุช ุงููุญุงุณุจูุฉ ุงูุงุญุชุฑุงููุฉ

### Double-Entry Bookkeeping โ
- ูููุฏ ูุญุงุณุจูุฉ ูุชูุงุฒูุฉ
- ุชุชุจุน ุงููุฏูู ูุงูุฏุงุฆู
- ุฑุจุท ุจุงููุณุชูุฏุงุช

### Financial Reporting (ุฌุงูุฒ ููุชูููุฐ)
- ุฏูุชุฑ ุงูููููุฉ ุงูุนุงู (General Ledger)
- ููุฒุงู ุงููุฑุงุฌุนุฉ (Trial Balance)
- ูุงุฆูุฉ ุงูุฏุฎู (Income Statement)
- ุงูููุฒุงููุฉ ุงูุนููููุฉ (Balance Sheet)

### Compliance & Audit โ
- ุณุฌู ุชุฏููู ูุงูู
- ุชุชุจุน ุงูุชุบููุฑุงุช
- ุตูุงุญูุงุช ูุชุฏุฑุฌุฉ
- ุญูุงูุฉ ุงูุจูุงูุงุช

---

## ๐ ุงููุซุงุฆู ุงููููุดุฃุฉ

1. **JOURNAL_ENTRY_SYSTEM.md** - ุฏููู ุดุงูู ููุธุงู ุงููููุฏ ุงูููููุฉ
2. **BANK_RECONCILIATION_SYSTEM.md** - ุฏููู ุงููุทุงุจูุฉ ุงูุจูููุฉ
3. **ACCOUNTING_ACHIEVEMENTS.md** - ูุฐุง ุงูููู (ููุฎุต ุงูุฅูุฌุงุฒุงุช)

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### 1. ุงูุชูุงุฑูุฑ ุงููุงููุฉ ุงููุชูุฏูุฉ
- ููุฒุงู ุงููุฑุงุฌุนุฉ (Trial Balance)
- ุฏูุชุฑ ุงูุฃุณุชุงุฐ ุงูุนุงู (General Ledger)
- ูุงุฆูุฉ ุงูุฏุฎู (Income Statement)
- ุงูููุฒุงููุฉ ุงูุนููููุฉ (Balance Sheet)
- ุชูุฑูุฑ ุงูุชุฏููุงุช ุงูููุฏูุฉ (Cash Flow Statement)
- ุญุณุงุจุงุช ุงููุจุถ/ุงูุฏูุน ุงููุชุฃุฎุฑุฉ (Aged Receivables/Payables)

### 2. ูุงุฌูุฉ ุงููุณุชุฎุฏู ููุนููุงุช
- ุดุงุดุฉ ุฅุฏุงุฑุฉ ุฃุณุนุงุฑ ุงูุตุฑู
- ุงุฎุชูุงุฑ ุงูุนููุฉ ูู ุงูููุงุชูุฑ

### 3. ุงูุฃุตูู ุงูุซุงุจุชุฉ
- ุณุฌู ุงูุฃุตูู
- ุญุณุงุจ ุงูุฅููุงู ุงูุชููุงุฆู

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุจูุงุก **ูุธุงู ูุญุงุณุจู ูุชูุงูู** ูุดูู:
- โ ุชุฎุตูุต ุงููุฏููุนุงุช ูุงูุฅูุตุงูุงุช
- โ ุชุฑููู ุชููุงุฆู ูููุณุชูุฏุงุช
- โ ูููุฏ ููููุฉ ุชููุงุฆูุฉ ููุฏููุฉ
- โ ูุทุงุจูุฉ ุงูุญุณุงุจุงุช ุงูุจูููุฉ
- โ ูุณุชูุฏุงุช ุชุฌุงุฑูุฉ ูุงููุฉ
- โ ุฃูุงู ูุตูุงุญูุงุช ูุชูุฏูุฉ
- โ ุชุฏููู ูุชุชุจุน ุดุงูู

ุงููุธุงู **ุฌุงูุฒ ููุฅูุชุงุฌ** ููููู ุงุณุชุฎุฏุงูู ููุฑุงู! ๐

---

## ๐ ุงููุณุงุนุฏุฉ

ูููุฒูุฏ ูู ุงููุนูููุงุชุ ุฑุงุฌุน:
- `JOURNAL_ENTRY_SYSTEM.md` - ูุธุงู ุงููููุฏ
- `BANK_RECONCILIATION_SYSTEM.md` - ุงููุทุงุจูุฉ ุงูุจูููุฉ
- API Documentation - ูู ูู ููู routes

ุชุงุฑูุฎ ุงูุฅูุฌุงุฒ: 20 ููููุจุฑ 2025

---

### 6. ุงูุชูุงุฑูุฑ ุงููุงููุฉ (Financial Reports)
**ุงูุญุงูุฉ**: โ ููุชูู (Backend)

**ุงูููุฒุงุช**:
- **ููุฒุงู ุงููุฑุงุฌุนุฉ (Trial Balance)**:
  - ุนุฑุถ ุฃุฑุตุฏุฉ ุฌููุน ุงูุญุณุงุจุงุช ูู ูุชุฑุฉ ูุญุฏุฏุฉ
  - ุงูุฑุตูุฏ ุงูุงูุชุชุงุญูุ ุงูุญุฑูุฉ ุงููุฏููุฉุ ุงูุญุฑูุฉ ุงูุฏุงุฆูุฉุ ุงูุฑุตูุฏ ุงูุฎุชุงูู
- **ุฏูุชุฑ ุงูุฃุณุชุงุฐ ุงูุนุงู (General Ledger)**:
  - ุชูุงุตูู ุงูุญุฑูุงุช ูุญุณุงุจ ูุนูู ูุน ุงูุฑุตูุฏ ุงูุชุฑุงููู
- **ูุงุฆูุฉ ุงูุฏุฎู (Income Statement)**:
  - ุงูุฅูุฑุงุฏุงุช ูุงููุตุฑููุงุช ูุตุงูู ุงูุฑุจุญ
- **ุงูููุฒุงููุฉ ุงูุนููููุฉ (Balance Sheet)**:
  - ุงูุฃุตูู ูุงูุฎุตูู ูุญููู ุงูููููุฉ (ูุน ุญุณุงุจ ุงูุฃุฑุจุงุญ ุงููุญุชุฌุฒุฉ ุชููุงุฆูุงู)

**ุงููููุงุช**:
- `server/utils/reports.ts`
- `server/routes/reports.ts`

**API Endpoints**:
- `GET /api/reports/trial-balance`
- `GET /api/reports/general-ledger`
- `GET /api/reports/income-statement`
- `GET /api/reports/balance-sheet`

---

### 7. ูุธุงู ุงูุฃุตูู ุงูุซุงุจุชุฉ (Fixed Assets System)
**ุงูุญุงูุฉ**: โ ููุชูู (Backend)

**ุงูููุฒุงุช**:
- ุณุฌู ุงูุฃุตูู (Asset Register)
- ุญุณุงุจ ุงูุฅููุงู ุงูุชููุงุฆู (Straight Line, Declining Balance)
- ุชุฑุญูู ุงูุฅููุงู ูุฅูุดุงุก ูููุฏ ููููุฉ ุชููุงุฆูุฉ
- ุณุฌู ุชุงุฑูุฎู ููุฅููุงู

**ุงููููุงุช**:
- `server/utils/fixedAssets.ts`
- `server/routes/fixedAssets.ts`

**API Endpoints**:
- `GET /api/fixed-assets`
- `POST /api/fixed-assets`
- `POST /api/fixed-assets/:id/depreciate`

---

### 8. ูุธุงู ุฅุฏุงุฑุฉ ุงููุฎุฒูู (Inventory Management)
**ุงูุญุงูุฉ**: โ ููุชูู (Backend)

**ุงูููุฒุงุช**:
- ุฅุฏุงุฑุฉ ูุณุชูุฏุนุงุช ูุชุนุฏุฏุฉ
- ุชุชุจุน ุญุฑูุงุช ุงููุฎุฒูู (ุดุฑุงุกุ ุจูุนุ ูููุ ุชุณููุฉ)
- ุชูููู ุงููุฎุฒูู (FIFO / Average Cost)
- ุชูุงุฑูุฑ ูุณุชููุงุช ุงููุฎุฒูู

**ุงููููุงุช**:
- `server/utils/inventory.ts`
- `server/routes/inventory.ts`

**API Endpoints**:
- `GET /api/inventory/levels`
- `GET /api/inventory/items/:id/valuation`
- `POST /api/inventory/adjustments`

---

### 9. ูุธุงู ุงูููุงุฒูุงุช (Budgeting System)
**ุงูุญุงูุฉ**: โ ููุชูู (Backend)

**ุงูููุฒุงุช**:
- ุฅุนุฏุงุฏ ููุงุฒูุงุช ุดูุฑูุฉ ูุณูููุฉ
- ุชูุฑูุฑ ุงูููุงุฒูุฉ ููุงุจู ุงููุนูู (Budget vs Actual)
- ุชุญููู ุงูุงูุญุฑุงูุงุช (Variance Analysis)

**ุงููููุงุช**:
- `server/utils/budget.ts`
- `server/routes/budgets.ts`

**API Endpoints**:
- `GET /api/budgets`
- `POST /api/budgets`
- `GET /api/budgets/vs-actual`

---

## ๐ ุงูุฎุทูุงุช ุงููุงุฏูุฉ

1. **ูุงุฌูุฉ ุงููุณุชุฎุฏู (Frontend)**:
   - ุจูุงุก ุดุงุดุงุช ููุชูุงุฑูุฑ ุงููุงููุฉ
   - ุจูุงุก ุดุงุดุงุช ููุฃุตูู ุงูุซุงุจุชุฉ
   - ุจูุงุก ุดุงุดุงุช ููุนููุงุช

2. **ุฅุฏุงุฑุฉ ุงููุฎุฒูู ุงููุชูุฏูุฉ**:
   - ุชุชุจุน ุงููููุงุช
   - ุชูููู ุงููุฎุฒูู (FIFO/Average Cost)
